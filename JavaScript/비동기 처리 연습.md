```javascript
// 동기는 동시에 일어나는, 작업의 응답과 다음 작업의 요청이 동시에 일어난다
// js는 비동기 함수를 이용한다, 함수를 요청하고 응답할때까지 기다리지 않는다(비동기 함수의 응답을 기다리지 않는다)

// 위에서 아래로 호출하는것은 맞다 , 싱글 스레드, 비동기 함수는 콜스택에 쌓인다(?)

// 비동기 함수를 만들어 보자

// 콜백함수를 이용해서 비동기함수를 동기적으로 처리할 수 있다, 비동기함수의 마지막에 콜백함수를 호출함으로써 순차적으로 일을 수행한다

// 비동기 함수 호출, 비동기함수내에서 콜백을 호출하여 동기적으로 해야할일을 비동기함수 내에서 처리하기

let pizza;
function orderPizza(callback) {
  console.log('making pizza');
  setTimeout(() => {
    pizza = 'real pizza';
    console.log('pizza making is done');
    callback();
  }, 1000);
}

console.log('do the laundry');
orderPizza(() => console.log(`eat ${pizza}`));
console.log('watch TV');
```

```javascript
// Promise객체 이용하기,

// promise는 반환(만드는)사람, 약속을 받는 사람이 있다, 받아서 이용함

// promise객체에는 미래에 얻을 데이터를 나중에 가져온다, 그 데이터는 올바른 데이터일수도 있고 올바르지 않은 데이터일수도 있다

// 미래에 데이터를 얻게된다면 할 일을 then함수를 호출해서 데이터를 다룬다

// 데이터는 promise객체의 함수 내의 함수 resolve, 또는 reject함수로 데이터가 전달되며 자동으로 다음 호출되는 함수의 인자로 전달된다

let pizza;
function orderPizza(money) {
  return new Promise((resolve, reject) => {
    console.log(`price: ${money}`);
    console.log('making pizza');
    setTimeout(() => {
      console.log('pizza making is done');
      resolve('real pizza');
    }, 1000);
  });
}

function deliverPizza(box) {
  return new Promise((resolve, reject) => {
    console.log('deliver start');
    setTimeout(() => {
      console.log('delivery is done');
      resolve(box);
    }, 2000);
  });
}

function onError(error) {
  console.log(`Error: ${error}`);
}

console.log('do the laundry');
orderPizza(10000).then(deliverPizza).then((pizza) => console.log(`eat ${pizza}`)).catch(onError);
console.log('watch TV');
```

```javascript
// async/await 이용하기

// async는 아무 함수나 async로 만들수 있으며 그 안에서만 await과 함께 함수를 호출할 수 있다

// await은 promise를 반환하는 함수에만 적용 가능하다

// promise가 결과를 반환할때까지 기다린다, resolve 또는 reject로 전달되는 데이터가 최종적으로 반환된다

// promise의 새로운 표기법이다, promise를 만드는것은 상관이 없고 받아서 이용할때 문법이 다를 뿐이다

  
function orderPizza(money) {
  return new Promise((resolve, reject) => {
    console.log(`price: ${money}`);
    console.log('making pizza');
    setTimeout(() => {
      console.log('pizza making is done');
      resolve('real pizza');
    }, 1000);
  });
}

function deliverPizza(box) {
  return new Promise((resolve, reject) => {
    box = box + ' in the box';
    setTimeout(() => {
      console.log('delivery is done');
      resolve(box);
    }, 2000);
  });
}

  
function onError(error) {
  console.log(`Error: ${error}`);
}

  
async function callDomino(money) {
  const pizza = await orderPizza(money);
  const deliveredPizza = await deliverPizza(pizza);
  console.log(`eat ${deliveredPizza}`);
}

console.log('do the laundry');
callDomino(10000); // async함수 내에서 할일을 모두 처리했다 (근데 이렇게 쓰는게 맞나?)
console.log('watch TV');
```