## JS Callback

callback = 뭔가 발생(실행)되고 난 다음 호출되는 function
javascript에서 기다림을 표현하는 하나의 방법

javascript밖에 있는것(db등) 을 이용할때 기다림이 필요하다
앞에 요청한것이 끝난 후에 다음 동작을 수행한다
기다리는 방법 두가지
callback, promise

model.queryMethod({filter}, callback)
- filter:
{} = search terms, 비어있으면 모든 형식을 찾는다
db내에서 찾을 document를 설정한다
- callback
db 검색 이후 실행되는 함수,
err와 result(doc)라는 signature를 갖는다
쿼리 실행에 에러가 발생할시, error 에는 해당 에러 정보가 들어가고 result 는 null
쿼리 실행이 성공할 시, error는 null, result에는 쿼리된 document가 반환


callback 함수 내부에서 코드가 순서대로 실행되지 않는다
오래 걸리는 코드를 나중에 실행한다

따라서 순차적으로 실행하기 위해 callback 이 아닌 promise 를 이용한다 


>mongoose v6.0이상에서는 Model.find()함수가 callback을 지원하지 않으며
Promise를 반환하도록 변경되었다

callback은 error인자를 통해 에러를 바로 볼수있다는 장점이 있다
promise방식에서는 try catch이용해 에러를 다룬다

---
## Promise

callback의 최신버전
async + await

async 가 있는 함수 내에서만 await을 할 수 있다

await로 해당 코드 동작이 완료될때까지 기다리고
완료된 후에 다음 코드를 실행한다

callback과 다르게 에러를 다루려면 try catch를 이용해야 한다

비순차적으로 처리 -> 직접 처리 순서를 정할수있다(?)

---

await은 앞의 동작이 끝날때 까지 기다리기 때문에 성능면에선 좋다고 할 수 없긴 한다
로딩이 오래걸릴때 유저에게 'loading'을 보여주기 위해 NextJS + React + REST 를 쓴다

---

+

뭔가 이상함 , 개념 제대로 공부해야함
#모르는거 callback, promise, 동기, 비동기

## callback function
callback은 일급함수를 쓰는 JavaScript에서
다른 함수에 인자로 전달되어 외부 함수 내에서 호출되는 내부 함수를 callback함수라고 부른다
-mdn

## first-class function
일급함수 

어떤 언어에서 함수가 변수처럼 다뤄질 수 있으면 그 언어는 일급함수를 갖는다고 한다
first-class function

1. 변수처럼 함수를 변수에 대입 가능
2. 함수를 반환 가능
3. 함수를 인자로 전달 가능





