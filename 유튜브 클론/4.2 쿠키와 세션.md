## http 쿠키

쿠키는 http의 기술
서버가 브라우저의 첫번재 요청에 대한 응답 리퀘스트 메세지의 헤더에 쿠키(문자열) 을 넣어 응답한다

브라우저는 다음 요청부터 쿠키와 함께 서버에 요청한다

원래 과거에는 서버의 용량이 부족했기때문에 클라이언트 측에 데이터를 저장하는 용도로 쿠키를 사용했다

쿠키는 클라이언트측에 저장되므로 변조, 유실, 도난되기 쉽다

현재는 서버의 용량이 부족하지 않기 때문에 데이터 저장 용도로 쿠키를 사용하지 않는다

---

## 무상태인 http 통신

http 는 connectionless, stateless 하다, 상태를 저장하지 않기때문에 상태를 계속 갖고 있는 연속적인 서비스를 만들기 위해 쿠키와 세션을 이용한다

사용자 인증정보를 쿠키로 저장하는것은 보안상 매우 취약하며 사용자의 인증정보를 유지하기 위해 서버측의 세션을 이용한다

사용자가 로그인하면 세션이 생성되며 세션에는 세션id가 존재한다 이 세션id를 쿠키로 사용자에게 전달한다

이제 사용자는 세션이 종료되기 전까지 쿠키인 세션id를 서버에 요청과 함께 전송하며 이를 통해 서버는 사용자를 식별한다

세션과 쿠키를 통해 웹페이지의 개인화가 가능해 졌다

---

<복습>
쿠키는 서버가 브라우저의 첫번째 요청에 대한 응답과 함께 전달하는 데이터

브라우저가 처음 서버에 요청할때 해당 유저의 세션을 만들거나 하면 세션 아이디를 브라우저에게 응답해준다 그러면 브라우저는 다음 요청부터 받은 쿠키(세션 아이디)와 함께 요청을 보내고 서버는 전달받은 쿠키를 확인하여 브라우저를 식별한다

쿠키는 원래 데이터를 클라이언트측에 저장하기 위한 것이었는데 현재는 서버 용량이 충분하기 때문에 이런 용도로 사용하지 않고 세션 아이디를 전달하는 용도로 쓰인다

http통신은 무상태이기 때문에 상태를 갖는, 연속적인 서비스를 만들기 위해 현재 사용자의 세션을 서버에 만들고 해당 세션 아이디를 쿠키를 통해 주고 받음으로써 세션 기능을 완성한다

세션은 현재 웹을 이용중인(서버에게 뭔가를 요청한) 사용자의 정보이며 서버가 사용자를 식별하는 방법이다

---

req.session
res.locals