브라우저가 웹서버에 리퀘스트 메세지를 전송하기 위해서는 웹서버의 ip주소를 알아야 한다
ip주소를 os의 프로토콜 스택이 이용하여 메세지를 전송함

---
## IP 주소

<TCP/IP에서의 네트워크>
허브에 여러대의 컴퓨터가 연결되어 있고 이것을 서브넷이라 한다
여러 서브넷이 라우터로 연결되어있다

서브넷 주소(네트워크 번호) + 호스트 주소(호스트 번호) = IP주소

IP주소는 네트워크 번호와 호스트번호를 합쳐서 32비트이기만 하면 된다
네트워크 번호 부분은 1, 호스트 번호 부분을 0으로 하는 32비트 값이 넷마스크다

넷마스크 = 네트워크번호와 호스트번호를 구분하기 위한 정보

넷마스크를 표기하면 너무 길어져서 한쪽의 비트 수만 표시하는 방법 = 프리픽스
[[네트워크 계층]]

10.11.12.13/24

호스트 번호가 모두 0인경우 = 서브넷을 대표하는 주소
호스트 번호가 모두 1인경우 = 브로드캐스트 주소 (서브넷에 있는 기기 전체에 패킷을 보낸다)

도메인명을 주소로 쓰면 여러 네트워크 기기들에서 표현하기 어렵고 비효율적이기 때문에 IP주소를 이용한다


---


host = 인터넷에 연결된 장치, 컴퓨터
hosts파일 = ip주소에 해당하는 도메인이름을 저장한 ip주소부 (전화번호부 같은것), 개별 컴퓨터가 작성한다. ip주소를 알아내기 위해 hosts파일을 제일 먼저 확인한다


이후 DNS 등장
## DNS 서버

Domain name system Server
넓은 의미의 도메인 = ip주소에 대응하는 호스트 이름

dns서버는 도메인에 해당하는 ip주소를 알고있다
dns서버에 ip주소를 요청하면 ip주소를 알려준다
ip주소를 요청하는 일 = name resolution
ip주소를 요청하는 클라이언트 = resolver (소켓 라이브러리의 프로그램)

맨처음 dns서버의 ip주소는 어떻게 아는가? -> 인터넷에 연결했을때 자동으로 ISP가 제공하는 dns서버 ip 주소를 이용한다 (DHCP?)

보안 상의 문제 등이 있기 때문에 본인이 판단하여 직접 사용하고 싶은 dns서버를 사용할 수 있다
ex) public dns이용


- 도메인 계층
blog.example.com (.)
서브 도메인 - ... -루트 도메인

도메인에는 계층이 있다
각 dns서버는 하위계층의 도메인의 dns서버의 ip주소를 알고있다.

맨처음 dns서버에 도메인명에 해당하는 ip주소가 없을경우 루트 dns서버에 문의하면 바로 아래계층의 dns서버의 ip주소를 알려주고 거기에 물어보라 한다

이과정을 계속거쳐 하위 dns서버에 문의하면 최종적으로 알고싶었던 도메인명에 해당하는 ip주소를 알 수 있다.

알아낸 ip주소를 이용하여 웹서버에 메세지를 전송한다

---

### 데이터 송수신

애플리케이션은 직접 네트워크 기능을 사용할 수 없고 os에 의뢰해야 한다
애플리케이션이 소켓 라이브러리를 호출한다

소켓 라이브러리 = 네트워크 기능을 호출하는 프로그램 모음집
애플리케이션이 소켓라이브러리를 호출하여 네트워크 기능을 이용한다

소켓라이브러리를 호출하면 소켓라이브러리는 프로토콜 스택(os)에 데이터 송수신을 의뢰한다

소켓 = 데이터 송수신을 위한 파이프의 입구, (소켓은 통신을 위한 제어정보)
서버는 소켓을 만들어 놓고 클라이언트의 접속을 기다린다
클라이언트는 소켓을 만들어 서버에 연결한다

- 데이터 송수신 과정
1. 소켓 작성
2. 접속
3. 데이터 송 수신
4. 연결 끊기


1. 소켓 작성하기 
socket함수 호출하면 소켓이 작성됨
각 소켓을 구분하기 위한 디스크립터 생성, 내 소켓을 구분하기 위한 디스크립터

2. 접속
connect(디스크립터, ip주소, 포트번호) 호출
접속하고자 하는 서버의 ip주소, 포트번호를 알아내어 접속하고자 하는 소켓을 알아내어 연결한다
상대의 접속하고자 하는 소켓을 구분하기 위해 포트번호를 이용한다 (상대의 디스크립터를 알 수 없기 때문에)

포트번호는 어플리케이션에 따라 미리 정한 포트번호를 사용한다
서버 어플리케이션의 포트번호가 미리 정해져있다
클라이언트의 포트번호는 프로토콜스택이 알아서 할당하고 서버에 통보한다

3. 데이터 송신-write함수 호출, 수신-read함수 호출
4. 접속을 끊는다-close함수 호출



